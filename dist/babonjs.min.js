/* 
	 babonjs - v0.1.2 
	 Included libraries: 
	 jQuery, Enquire. 
*/
if("undefined"==typeof jQuery||"undefined"==typeof enquire)throw new Error("BabonJS requires jQuery and Enquire!");!function(){var Extend=function(obj){if("object"==typeof obj&&void 0===obj.indexOf)for(var key in obj)obj.hasOwnProperty(key)&&(window[key]=obj[key])};window.isDefined=function(obj){return"undefined"!=typeof obj?!0:!1},window.isString=function(obj){return"string"==typeof obj?!0:!1},window.isObject=function(obj){return"object"==typeof obj&&void 0===obj.indexOf&&void 0===obj.splice?!0:!1},window.isArray=function(obj){return"object"==typeof obj&&Array.isArray(obj)&&!window.isJQuery(obj)?!0:!1},window.isFunction=function(obj){return"function"==typeof obj?!0:!1},window.isNumber=function(obj){return"number"==typeof obj?!0:!1},window.isBoolean=function(obj){return"boolean"==typeof obj?!0:!1},window.isJQuery=function(obj){return"object"==typeof obj&&obj.hasOwnProperty("length")&&obj.jquery?!0:!1},window.isAutomator=function(obj){return"object"==typeof obj&&"automator"===obj._constructor.type?!0:!1},window.isGenerator=function(obj){return"object"==typeof obj&&"generator"==obj._constructor.type?!0:!1},window.isHTML=function(obj){return"object"==typeof obj&&obj.ELEMENT_NODE?!0:!1},window.isColor=function(obj){return/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(obj)?!0:!1},window.isURL=function(obj){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(obj)?!0:!1},window.isEmail=function(obj){return/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i.test(obj)?!0:!1},window.isDate=function(obj){return window.isNaN(new Date(obj).getDate())?!1:!0},window.foreach=function(object,func){if(isFunction(func))if(isArray(object)||isJQuery(object)&&isFunction(func))for(var i=0;i<object.length;++i)func(object[i],i);else if(isObject(object)&&isFunction(func))for(var key in object)object.hasOwnProperty(key)&&func(key,object[key]);else if(isNumber(object)&&isFunction(func))for(var i=1;object>=i;++i)func(i);else{if(!isString(object)||!isFunction(func))return console.error("Invalid arguments!");for(var i=0;i<object.length;++i)func(object.charAt(i),i+1)}return object},window.pregReplace=function(string,pattern,replace){var newstring,replaced,candidate,match=string.match(pattern);if(match){newstring=string;for(var i=1;i<=match.length;++i){var cur=match[i-1];"string"==typeof cur&&(candidate=/\$i/g,replaced=replace.replace(candidate,match[i-1]),newstring=newstring.replace(match[i-1],replaced))}return newstring}return string},window.parseURL=function(url){if(isString(url)){var splited=url.split("/"),first="",paths="",files="",exten="";if(foreach(splited,function(value,index){0===index&&"/"===value&&(first="/"),index===splited.length-1?files=value:paths=paths+value+"/"}),""!==files){var ef=files.split("."),en="",ex="";foreach(ef,function(value,index){index===ef.length-1?ex=value:(en+=value,index!==ef.length-2&&(en+="."))}),files=en,exten=ex}return{root:paths,name:files,ext:exten}}},window.splitURL=window.parseURL,Extend({__extend__:Extend})}(),function($){$.extend(jQuery.expr[":"],{hasattr:function(obj,idx,prop){if(!prop[3])return!1;var args=prop[3].replace(/\s?,\s?/,",").split(",");if(1===args.length){var attrs=obj.attributes;if(attrs&&attrs.length>0)for(var i=0;i<attrs.length;i++){var name=attrs[i].name;if(name===args[0])return!0}return!1}if(2===args.length){var name=args[0],vals=args[1],oval=obj.getAttribute(name);if(oval&&(oval=oval.split(" ")),oval&&oval.length>0)for(var i=0;i<oval.length;++i)if(oval[i]===vals)return!0;return!1}},hasdata:function(obj,idx,prop){var attrs=obj.attributes;if(!prop[3]){if(attrs&&attrs.length>0)for(var i=0;i<attrs.length;++i){var name=attrs[i].name;if(name.search("data")>-1)return!0}return!1}var args=prop[3].replace(/\s?,\s?/,",").split(",");if(1===args.length){if(attrs&&attrs.length>0)for(var i=0;i<attrs.length;++i){var name=attrs[i].name;if(name==="data-"+args[0])return!0}return!1}if(2===args.length){var name=args[0],vals=args[1],oval=obj.getAttribute("data-"+name);if(oval&&(oval=oval.split(" ")),oval&&oval.length>0)for(var i=0;i<oval.length;++i)if(oval[i]===vals)return!0;return!1}},hasname:function(obj,idx,prop){var attrs=obj.attributes;if(prop[3])return obj.getAttribute("name")===prop[3]?!0:!1;if(attrs&&attrs.length>0)for(var i=0;i<attrs.length;++i){var name=attrs[i].name;if("name"===name)return!0}return!1}})}(jQuery),function($){"use strict";var countRatio=function(width,height){var getDivisor,temp,divisor;return getDivisor=function(a,b){return 0===b?a:getDivisor(b,a%b)},width===height?"1,1":(+height>+width&&(temp=width,width=height,height=temp),divisor=getDivisor(+width,+height),"undefined"==typeof temp?width/divisor+","+height/divisor:height/divisor+","+width/divisor)};$.fn.hasAttr=function(name){if(this.length<1)return!1;var obj=this[0],atr=obj.attributes;if(isString(name)){if(!atr[name])return!1}else if(isArray(name))for(var i=0;i<name.length;++i)if(!atr[name[i]])return!1;return!0},$.fn.hasData=function(name){if(isString(name))return this.hasAttr("data-"+name);if(isArray(name)){for(var i=0;i<name.length;++i)name[i]="data-"+name[i];return this.hasAttr(name)}},$.fn.getData=function(name){if(isString(name)){var data=this.attr("data-"+name);if(data)if(data.search(/(\:)/)>-1&&data.search(/\(/))try{data=JSON.parse(data)}catch(e){try{eval("data = {"+data+"}")}catch(e){try{eval("data = "+data)}catch(e){try{data=eval(data)}catch(e){}}}}else if(data.search(",")>-1){if(data=data.replace(/\s?,\s?/g,",").split(","),data.length)for(var d=0;d<data.length;d++){var now=data[d];Number(now)?data[d]=Number(now):"true"===now?data[d]=!0:"false"===now&&(data[d]=!1)}}else Number(data)?data=Number(data):"true"===data?data=!0:"false"===data&&(data=!1);return data}if(Array.isArray(name)){for(var data={},x=0;x<name.length;++x){var vals=this.getData(name[x]);vals&&(data[name[x]]=vals)}return data}for(var data={},attr=this[0].attributes,a=0;a<attr.length;++a){var name=attr[a].name;if(name.search("data-")>-1){name=name.replace("data-","");var vals=this.getData(name);data[name]=vals}}return data},$.fn.setData=function(name,value){if(isString(name)&&value)isObject(value)&&(value=isArray(value)?value.toString():JSON.stringify(value)),this.attr("data-"+name,value);else if(isObject(name))for(var key in name)if(name.hasOwnProperty(key)){var val=name[key];isObject(val)&&(val=isArray(val)?val.toString():JSON.stringify(val)),this.attr("data-"+key,val)}return this},$.fn.appendData=function(name,value){if(isString(name)&&value)for(var x=0;x<this.length;++x){var obj=$(this[x]),att=obj.getData(name);att&&!isObject(att)?obj.setData(name,att+" "+value):obj.setData(name,value)}else if(isObject(name)){var obj=this;foreach(name,function(name,value){obj.appendData(name,value)})}return this},$.fn.remData=function(name){if(isString(name))this.removeAttr("data-"+name);else if(isArray(name)){var obj=this;foreach(name,function(value){obj.removeAttr("data-"+value)})}return this},$.fn.offsets=function(){var offset=this.offset(),width=this.width(),height=this.height();offset.width=width,offset.height=height;var wdt=offset.width/2,hgt=offset.height/2,p_top=offset.top+hgt,p_lft=offset.left+wdt;return offset.center={top:Math.round(p_top),left:Math.round(p_lft)},offset},$.fn.center=function(){var ofs=this.offsets(),wdt=ofs.width/2,hgt=ofs.height/2,p_top=ofs.top+hgt,p_lft=ofs.left+wdt;return{top:Math.round(p_top),left:Math.round(p_lft)}},$.fn.boxRatio=function(){return this.each(function(){var ratio=$(this).getData("box-ratio");if(!ratio){var width=$(this).width(),height=$(this).height();ratio=countRatio(width,height).split(","),$(this).setData("box-ratio",ratio)}}),this.getData("box-ratio")},$.fn.direction=function(){if(this.length<1)return this;if(1===this.length){var offset=this.offsets();return offset.width>offset.height?(this.addClass("landscape").removeClass("portrait"),"landscape"):(this.addClass("portrait").removeClass("landscape"),"portrait")}return this.each(function(){$(this).direction()}),this},$.fn.orientation=$.fn.direction,$.fn.style=function(){if(this.length>=1){var origin=this.get(0).style,styles={};for(var prop in origin)origin.hasOwnProperty(prop)&&""!==origin[prop]&&null!==origin[prop]&&"cssText"!==prop&&-1===prop.search(/[\d]/)&&(styles[prop]=origin[prop]);return styles}return void 0},$.fn.focusTo=function(start,end){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(start,end);else if(this.createTextRange){var range=this.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",start),range.select()}})}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),function(){var Tools={};Tools.variables={},Tools.constants={},Tools.functions={},Tools.vars=function(name,value){if(name){if(value)return Tools.variables[name]=value;if(Tools.variables[name])return Tools.variables[name]}},Tools.cons=function(name,value){return name?value?isFunction(value)?console.warn("You can't register function as a constant. Please use func() rather than cons()."):Tools.constants[name]?console.warn('Constant "'+name+'" alerady registered.'):Tools.constants[name]=value:Tools.constants[name]:void 0},Tools.func=function(name,func){return isString(name)?isFunction(func)?Tools.functions[name]?console.warn('Function "'+name+'" alerady registered.'):(Tools.functions[name]=func,Tools.functions[name]):Tools.functions[name]:void 0},Tools.proto=function(name,proto_name,func){return isString(name)&&isFunction(Tools.functions[name])&&isString(proto_name)&&isFunction(func)?(Tools.functions[name].prototype[proto_name]=func,Tools.functions[name]):void 0},__extend__({cons:Tools.cons,vars:Tools.vars,func:Tools.func,proto:Tools.proto,__tools__:function(){return{vars:Tools.variables,cons:Tools.constants,func:Tools.functions}}})}(),function($){var DataFinder=function(name,value,from){if(isString(name)){var arName=name.replace(/\s/g,"").split(","),query="";return isString(value)||isNumber(value)||isBoolean(value)?(arName.length>1?(foreach(arName,function(name){query+=":hasdata("+name+", "+value+"),"}),query=query.replace(/\,$/,"")):query=":hasdata("+name+", "+value+")",isJQuery(from)||isHTML(from)?$(query,from):$(query)):isJQuery(value)||isHTML(value)?(arName.length>1?(foreach(arName,function(name){query+=":hasdata("+name+"),"}),query=query.replace(/\,$/,"")):query=":hasdata("+name+")",$(query,value)):(arName.length>1?(foreach(arName,function(name){query+=":hasdata("+name+"),"}),query=query.replace(/\,$/,"")):query=":hasdata("+name+")",$(query))}if(isObject(name)){var query="";return foreach(name,function(name,value){query+=isString(value)&&"?"!==value?":hasdata("+name+", "+value+")":":hasdata("+name+")"}),isJQuery(value)||isHTML(value)?$(query,value):$(query)}if(isArray(name)){var query="";return foreach(name,function(value){query+=":hasdata("+value+")"}),isJQuery(value)||isHTML(value)?$(query,value):$(query)}};window.$data=$.findData=DataFinder}(jQuery),function(registry){"object"==typeof exports?module.exports=registry():"function"==typeof define&&define.amd?define(registry):window.Registry=window.regs=registry()}(function(){var AppReg={},RegKey={},Registry=function(name,value,option){if(isString(name)){if(!isDefined(value))return"undefined"!=typeof AppReg[name]?AppReg[name]:void 0;if(this._constructor=function(){},this._constructor.locked=!1,"undefined"!=typeof AppReg[name]&&AppReg[name]._constructor.locked===!0&&(this._constructor.locked=!0),this.value=value,this.name=name,this._constructor.locked)return console.warn("Registry "+name+' already exists as Protected Registry. Please use ".update()" method and give your key to update the registry.');isObject(option)&&option.lock===!0&&isString(option.key)?(this._constructor.locked=!0,RegKey[name]=option.key,AppReg[name]=this):(this._constructor.locked=!1,this._constructor.unlock=null,AppReg[name]=this)}return this};return Registry.prototype={update:function(value,key){if(this._constructor.locked===!0){if(!key||key!==RegKey[this.name])return console.warn("Unable to update protected registry. Please check your key.");this.value=value}return this}},function(name,value,option){return new Registry(name,value,option)}}),function(automator){"object"==typeof exports?module.exports=automator():"function"==typeof define&&define.amd?define(automator):window.Automator=automator()}(function(){var version="0.1.2";if("undefined"==typeof jQuery)return console.error("BabonJS requires: jQuery 1.10+ and Enquire!");var $=jQuery,AutomatorMaps={automator:{},prebuilds:[],disableds:[]},automator=function(name,builder,auto){return new Automator(name,builder,auto)},Automator=function(name,builder,auto){if(isString(name)){if(isDefined(builder)){if(isFunction(builder)){var Automator=function(){return this._constructor={},this._constructor.id=name,this._constructor.func=builder,this._constructor.version=version,this._constructor.hand={},this._constructor.type="automator",this.auto=!0,this.dont=[],this._config={loadtime:"onready",counter:0,IDPrefix:name+"-",clean:!1,data:{Kit:name,KitID:name+"-id"},maps:{}},isBoolean(auto)&&(this.auto=auto),this.auto===!0&&AutomatorMaps.prebuilds.push(name),this};return Automator.prototype={},foreach(defaultModules,function(name,func){Automator.prototype[name]=func}),foreach(builder.prototype,function(name,func){Automator.prototype[name]=func}),AutomatorMaps.automator[name]=new Automator,automator.list=Object.keys(AutomatorMaps.automator),AutomatorMaps.automator[name]}return console.warn("Can't create automator \""+name+'" with '+typeof builder+" as a builder."),!1}return isAutomator(AutomatorMaps.automator[name])?AutomatorMaps.automator[name]:(console.warn('Automator "'+name+'" undefined.'),!1)}return this},defaultModules={setup:function(name,value){if(isString(name)&&isDefined(value))this._config[name]=value;else{if(!isObject(name))return console.warn("Invalid "+this._constructor.id+" config arguments!"),this._config;var self=this;foreach(name,function(name,value){self._config[name]=value})}return this},config:function(id,name){if(isString(id)&&isDefined(name))this._config.data[id]=name;else{if(!isObject(id))return console.warn("Invalid "+this._constructor.id+" config arguments!"),this._config.data;var self=this;foreach(id,function(id,name){self._config.data[id]=name})}return this},list:function(){return this._config.maps},insert:function(id,kit){return isString(id)&&isObject(kit)&&(this._config.maps[id]=kit),this},"with":function(id){return isString(id)&&this._config.maps.hasOwnProperty(id)?this._config.maps[id]:void console.warn(this._constructor.id+' "'+id+'" is undefined!')},build:function(){if(this.enabled()===!1)return this;if(this.dont.length>0){for(var i=0;i<=this.dont.length;++i)if(isFunction(this.dont[i])&&this.dont[i]()===!0)return this;return this._constructor.func.apply(this,arguments)}return this._constructor.func.apply(this,arguments)},remove:function(){return isAutomator(this._constructor.id)?(delete AutomatorMaps.automator[this._constructor.id],automator.list=Object.keys(AutomatorMaps.automator)):this},escape:function(args){if(isFunction(args))this.dont.push(args);else if(isArray(args)){var parent=this;foreach(args,function(func){isFunction(func)&&parent.dont.push(func)})}return this},autobuild:function(bool){var idx=AutomatorMaps.prebuilds.indexOf(this._constructor.id);return bool===!1&&idx>-1?AutomatorMaps.prebuilds[idx]=void 0:bool===!0&&-1===idx?AutomatorMaps.prebuilds.push(this._constructor.id):bool===!0&&idx>-1&&(AutomatorMaps.prebuilds[idx]=this._constructor.id),this.auto=bool,this},enabled:function(){var idx=AutomatorMaps.disableds.indexOf(this._constructor.id);return idx>-1?!1:!0},bind:function(name,func){return isString(name)&&isFunction(func)&&(this._constructor.hand[name]=func),this},unbind:function(name){return isString(name)&&isFunction(this._constructor.hand[name])&&delete this._constructor.hand[name],this},forward:function(parent){return foreach(this._constructor.hand,function(name,func){isObject(parent)?func.apply(parent):func()}),this}};return automator.module=Automator.prototype=defaultModules,automator.loadtime="onready",$(document).ready(function(){$("html").setData("signature","Using BabonJS version "+version+".");var loadlist=[];"onload"===automator.loadtime?$(window).load(function(){foreach(AutomatorMaps.prebuilds,function(name){isString(name)&&-1!==AutomatorMaps.prebuilds.indexOf(name)&&Automator(name).build()})}):(foreach(AutomatorMaps.prebuilds,function(name){if(isString(name)&&-1!==AutomatorMaps.prebuilds.indexOf(name)){var atom=AutomatorMaps.automator[name];"onload"===atom._config.loadtime?loadlist.push(atom):"onready"===atom._config.loadtime&&atom.build()}}),$(window).load(function(){foreach(loadlist,function(atom){atom.build()})}))}),automator.disable=function(name){return isString(name)?-1===AutomatorMaps.disableds.indexOf(name)&&AutomatorMaps.disableds.push(name):isArray(name)&&foreach(name,function(obj){automator.disable(obj)}),name},automator.enable=function(name){if(isString(name)){var idx=AutomatorMaps.disableds.indexOf(name);idx>-1&&(AutomatorMaps.disableds[idx]=void 0)}else isArray(name)&&foreach(name,function(obj){automator.enable(obj)});return name},automator.list=Object.keys(AutomatorMaps.automator),automator.maps=AutomatorMaps,automator.debug=!1,automator.core=Automator,automator.build=function(from){var context=$("body");return(isString(from)||isJQuery(from)||isHTML(from))&&(context=$(from)),foreach(automator.list,function(name){var atm=AutomatorMaps.automator[name],kit_name=atm._config.data.Kit,object=jQuery.findData(kit_name,context);object.length>0&&atm.build(object)}),context},automator}),function(generator){"object"==typeof exports?module.exports=generator():"function"==typeof define&&define.amd?define(generator):window.Generator=generator()}(function(){"use strict";$=jQuery;var GeneratorMaps={generator:{},"protected":[],counter:0},generator=function(name,maker,option){return new Generator(name,maker,option)},Generator=function(name,maker,option){if(isString(name)){if(!isDefined(maker))return isObject(GeneratorMaps.generator[name])?GeneratorMaps.generator[name]:console.warn('Generator "'+name+'" undefined.');if(!isFunction(maker))return console.warn("Can't create Generator "+name+" with "+typeof maker+" as a maker.");if(this._constructor=function(){},this._constructor.id=name,this._constructor.type="generator",this._constructor.func=maker,this.data={},this.html=$(""),isObject(option)&&option.lock===!0&&isString(option.key)){var gen=GeneratorMaps[name];if(isGenerator(gen)&&gen.locked===!0)return console.warn("Can't update protected generator "+name+'. Please use "Generator.update()" method to replace the generator.');this._constructor.locked=!0,this._constructor.unlock=option.key,GeneratorMaps.generator[name]=this,GeneratorMaps.protected.push(name)}else GeneratorMaps.generator[name]=this;this._constructor.fluid=isObject(option)&&option.extendable===!0?!0:!1,generator.list=Object.keys(GeneratorMaps.generator)}return this};generator.module=Generator.prototype={make:function(){var mst=this,cst=this._constructor,Generator=function(){this._constructor=cst;for(var key in mst)mst.hasOwnProperty(key)&&(this[key]=mst[key]);return this};return Generator.prototype={},foreach(defaultModules,function(name,func){Generator.prototype[name]=func}),foreach(this._constructor.func.prototype,function(name,func){Generator.prototype[name]=func}),this._constructor.func.apply(new Generator,arguments)},remove:function(){return isGenerator(GeneratorMaps.generator[this._constructor.id])?(isAutomator(this._constructor.id)&&Automator(this._constructor.id).remove(),this.html.remove(),delete GeneratorMaps.generator[this._constructor.id],generator.list=Object.keys(GeneratorMaps.generator)):this}};var defaultModules={build:function(){var automator=Automator(this._constructor.id);return isAutomator(automator)&&automator.build(this.html),this},appendTo:function(){return this.html.appendTo(arguments),this},prependTo:function(){return this.html.prependTo(arguments),this},animate:function(){return this.html.animate(arguments),this},addClass:function(){return this.html.addClass(arguments),this},toggleClass:function(){return this.html.toggleClass(arguments),this},remove:function(){return this.html.remove(),this}},reconstructor=function(){return this};return generator.extend=function(from,into,args){var master=GeneratorMaps.generator[from];return isGenerator(master)&&(reconstructor.call(into,from),master._constructor.func.apply(into,args)),this},generator.update=function(name,maker,key){if(isString(name)){var gen=GeneratorMaps.generator[name];if(isGenerator(gen)&&isFunction(maker)&&gen.locked===!0&&isObject(option)&&key===gen.unlock)return gen.func=maker,gen}return void 0},generator.lock=function(name,key){if(isString(name)&&isString(key)){var gen=GeneratorMaps.generator[name];if(isGenerator(gen))return gen.locked=!0,gen.unlock=key,gen}return void 0},generator.free=function(name,key){if(isString(name)&&isString(key)){var gen=GeneratorMaps.generator[name];if(isGenerator(gen)&&gen.locked===!0&&isString(key)&&key===gen.unlock)return gen.locked=!1,gen.unlock=null,GeneratorMaps.protected[GeneratorMaps.protected.indexOf(gen.id)]=void 0,gen}return void 0},generator.list=Object.keys(GeneratorMaps.generator),generator.core=Generator,generator}),function(){window["is-mobile"]=!1,enquire.register("only screen and (min-device-width : 320px) and (max-device-width : 767px)",{match:function(){window["is-mobile"]=!0}}),window["is-tablet"]=!1,enquire.register("only screen and (min-device-width : 768px) and (max-device-width : 1024px), (min-width: 768px) and (max-width: 1200px)",{match:function(){window["is-tablet"]=!0}}),window["is-desktop"]=!1,enquire.register("screen and (min-width: 960px)",{match:function(){window["is-desktop"]=!0}}),window["is-retina"]=!1,window.devicePixelRatio&&window.devicePixelRatio>1&&(window["is-retina"]=!0);var _MQ_=function(query){return this.query="",isString(query)&&(this.query=query),this};_MQ_.prototype={run:function(func){return isFunction(func)&&isString(this.query)&&(enquire.unregister(this.query),enquire.register(this.query,{match:func})),this},del:function(){return this.query&&enquire.unregister(this.query),this},onReady:function(func){if(isFunction(func)){var query=this;$(document).ready(function(){query.run(func)})}return this}},__extend__({$_desktop:new _MQ_("screen and (min-width: 960px)"),$_mobile:new _MQ_("only screen and (min-device-width : 320px) and (max-device-width : 767px)"),$_tablet:new _MQ_("only screen and (min-device-width : 768px) and (max-device-width : 1024px)")}),window.$media=window.atmedia=function(STR_QUERY){return new _MQ_(STR_QUERY)}}(enquire),function($,$d){"use strict";var AccordionName="accordion",AccordionGroupName="accordion-group",acSetup={effect:{expand:{simple:function(){this.content.slideDown()}},collapse:{simple:function(){this.content.slideUp()}}}},acConfig={KitState:"accordion-state",KitDefault:"accordion-default",ExpandClass:"expanded",CollapseClass:"collapsed",Button:"accordion-button",Content:"accordion-content"},Config={},GroupConfig={},AccordionGroup=function(){return this.config={},this.content={},this.current=null,this};AccordionGroup.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this},clean:function(){return this.holder.remData([GroupConfig.data.Kit,GroupConfig.data.KitID]),foreach(this.content,function(id,kit){kit.holder.remData(GroupConfig.data.KitID)}),this},insert:function(name,accordion){return isString(name)&&isObject(accordion)&&(this.content[name]=accordion),this},expand:function(name){if(isString(name)&&this.content.hasOwnProperty(name)){var accordion=this.content[name];accordion.state===Config.data.ExpandClass?accordion.collapse():accordion.expand(),null!==this.current&&this.current.id!==name&&this.current.collapse(),this.current=accordion}return this}};var accordionGroup=function(object){var $cfg=GroupConfig=this._config;isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var kit_id=$(this).getData($cfg.data.KitID);isString(kit_id)||(kit_id=$cfg.IDPrefix+($cfg.counter+1),$cfg.counter++);var Kit=(new AccordionGroup).set({id:kit_id,holder:$(this).setData($cfg.data.KitID,kit_id)}),config=$(this).getData($cfg.data.Kit);isObject(config)&&foreach(config,function(name,value){Kit.config[name]=value}),$cfg.maps[kit_id]=Kit,$d(Config.data.Kit,Kit.holder).setData($cfg.data.KitID,kit_id)})};Automator(AccordionGroupName,accordionGroup);var Accordion=function(){return this.config={effect:"default",expand:!1,click:!0,enter:!1,hover:!1,delay:200},this.id="none",this.group="none",this.state=acConfig.CollapseClass,this.holder=$("<div>"),this};Accordion.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this},toggle:function(){return"none"!==this.group?Automator(AccordionGroupName).with(this.group).expand(this.id):this.state===Config.data.ExpandClass?this.collapse():this.expand(),this},expand:function(){var efc=this.config.effect;return this.state=Config.data.ExpandClass,Config.effect.expand.hasOwnProperty(efc)?Config.effect.expand[efc].apply(this):"default"===efc?(this.holder.removeClass(Config.data.CollapseClass).addClass(this.state),this.content.removeClass(Config.data.CollapseClass).addClass(this.state),this.button.removeClass(Config.data.CollapseClass).addClass(this.state),!Config.clean&&Automator.debug&&(this.holder.setData(Config.data.KitState,this.state),this.button.setData(Config.data.KitState,this.state),this.content.setData(Config.data.KitState,this.state))):console.warn(AccordionName+' effect handler "'+efc+'" is undefined!'),this},collapse:function(){var efc=this.config.effect;return this.state=Config.data.CollapseClass,Config.effect.collapse.hasOwnProperty(efc)?Config.effect.collapse[efc].apply(this):"default"===efc?(this.holder.removeClass(Config.data.ExpandClass).addClass(this.state),this.content.removeClass(Config.data.ExpandClass).addClass(this.state),this.button.removeClass(Config.data.ExpandClass).addClass(this.state),!Config.clean&&Automator.debug&&(this.holder.setData(Config.data.KitState,this.state),this.button.setData(Config.data.KitState,this.state),this.content.setData(Config.data.KitState,this.state))):console.warn(AccordionName+' effect handler "'+efc+'" is undefined!'),this}};var accordion=function(object){var $cfg=this._config;return isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var kit_id=$(this).getData($cfg.data.KitID);isString(kit_id)||(kit_id=$cfg.IDPrefix+($cfg.counter+1),$cfg.counter++);var Kit=(new Accordion).set({id:kit_id,holder:$(this).setData($cfg.data.KitID,kit_id)}),config=$(this).getData($cfg.data.Kit);if(isObject(config)&&foreach(config,function(name,value){Kit.config[name]=value}),Kit.holder.hasData(GroupConfig.data.KitID)){var gid=Kit.holder.getData(GroupConfig.data.KitID);Kit.group=gid,isString(gid)&&Automator(AccordionGroupName).with(gid).insert(kit_id,Kit)}$cfg.maps[kit_id]=Kit,$d($cfg.data.Button,this).setData($cfg.data.KitID,kit_id),$d($cfg.data.Content,this).setData($cfg.data.KitID,kit_id)}),foreach($cfg.maps,function(id,kit){var btQ={};btQ[$cfg.data.Button]="?",btQ[$cfg.data.KitID]=id,kit.button=$d(btQ,kit.holder);var ctQ={};if(ctQ[$cfg.data.Content]="?",ctQ[$cfg.data.KitID]=id,kit.content=$d(ctQ,kit.holder),kit.config.expand===!0?kit.expand():kit.collapse(),kit.hoverTimer=setTimeout(function(){}),kit.enterTimer=setTimeout(function(){}),kit.config.click&&kit.button.click(function(e){return e.stopPropagation(),kit.toggle(),!1
}),kit.config.hover&&!kit.config.enter){var nextState=kit.state;kit.button.hover(function(){nextState=nextState===$cfg.data.ExpandClass?$cfg.data.CollapseClass:$cfg.data.ExpandClass,clearTimeout(kit.hoverTimer),kit.hoverTimer=setTimeout(function(){kit.state!==nextState&&kit.toggle()},kit.config.delay)})}kit.config.enter&&!kit.config.hover&&kit.button.mouseenter(function(){clearTimeout(kit.enterTimer),kit.enterTimer=setTimeout(function(){kit.toggle()},kit.config.delay)}),($cfg.clean||!Automator.debug)&&(kit.holder.remData([$cfg.data.Kit,$cfg.data.KitID]),kit.button.remData([$cfg.data.Button,$cfg.data.KitID]),kit.content.remData([$cfg.data.Content,$cfg.data.KitID]),foreach(Automator(AccordionGroupName).list(),function(id,kit){kit.clean()}))}),this};accordion.prototype={addExpandEffect:function(name,handler){return isString(name)&&isFunction(handler)?Config.effect.expand[name]=handler:isObject(name)&&foreach(name,function(name,handler){Config.effect.expand[name]=handler}),this},addCollapseEffect:function(name,handler){return isString(name)&&isFunction(handler)?Config.effect.collapse[name]=handler:isObject(name)&&foreach(name,function(name,handler){Config.effect.collapse[name]=handler}),this}},Automator(AccordionName,accordion).setup(acSetup).config(acConfig),Config=Automator(AccordionName)._config}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="dynamic-background",defConf={responsive:!0,retina:!0,replace:!1,clean:!1,data:{Kit:"background",KitID:"background-id"}},DynamicBackround=function(object){var $cfg=this._config;return isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var img_src=$(this).getData($cfg.data.Kit),new_src="";if("get-child-img"===img_src&&(img_src=$("img",this).attr("src")),isString(img_src)){var img_url=parseURL(img_src);if(isObject(img_url)){new_src=1==$cfg.responsive?window["is-mobile"]===!0?img_url.root+img_url.name+".mob":window["is-tablet"]===!0?img_url.root+img_url.name+".tab":img_url.root+img_url.name:img_url.root+img_url.name,new_src+=1==$cfg.retina&&window["is-retina"]===!0?"@2x."+img_url.ext:"."+img_url.ext;var target=$(this);$.ajax({url:new_src,type:"HEAD",success:function(){target.css("backgroundImage","url("+new_src+")")},error:function(){target.css("backgroundImage","url("+img_src+")")}}),($cfg.replace===!0||$cfg.clean===!0)&&target.remData($cfg.data.Kit)}}$cfg.clean!==!0&&Automator.debug||$(this).remData($cfg.data.Kit)}),this};Automator(AutomatorName,DynamicBackround).setup(defConf)}(jQuery,jQuery.findData),function($,$d){"use strict";var nameof={"box-ratio":"box-ratio","box-height":"box-height","box-row-height":"box-row-height"},BoxRatio=function(object){var $cfg=this._config;return isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var box_height,box_width=$(this).width(),box_ratio=$(this).getData($cfg.data.Kit);if(isArray(box_ratio)&&2===box_ratio.length)box_height=Math.round(box_width/box_ratio[0]*box_ratio[1]),$(this).height(box_height);else if(isString(box_ratio)){var ratio=box_ratio.replace(/\s+/g,"").split(":");ratio.length>0&&(box_height=Math.round(box_width/ratio[0]*ratio[1]),$(this).height(box_height))}$cfg.clean===!0&&$(this).remData($cfg.data.Kit)}),this};Automator(nameof["box-ratio"],BoxRatio),$.fn.maintainRatio=function(ratio){var $atm=Automator(nameof["box-ratio"]);return isArray(ratio)||(ratio=this.getData($atm._config.data.Kit)),isArray(ratio)&&this.setData($atm._config.data.Kit,ratio),$atm.build(this),this};var BoxHeightMaintainer=function(){return this.mode="capture-children",this.height=0,this.holder=$("<div>"),this.childs=$("<div>"),this};BoxHeightMaintainer.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this}};var boxHeight=function(object){var $cfg=this._config;return $cfg.data.Child="box-child",isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var kit_id=$(this).getData($cfg.data.KitID);isString(kit_id)||(kit_id=$cfg.IDPrefix+($cfg.counter+1),$cfg.counter++);var Kit=(new BoxHeightMaintainer).set({id:kit_id,holder:$(this).setData($cfg.data.KitID,kit_id),defcfg:$cfg}),mode=Kit.holder.getData($cfg.data.Kit);isString(mode)&&(Kit.mode=mode),$cfg.maps[kit_id]=Kit,"fill-parent"!==Kit.mode&&$d($cfg.data.Child,Kit.holder).setData($cfg.data.KitID,kit_id)}),foreach($cfg.maps,function(id,kit){if("fill-parent"===kit.mode)kit.holder.height(kit.holder.parent().height());else{var childQuery={};childQuery[$cfg.data.Child]="?",childQuery[$cfg.data.KitID]=id,kit.childs=$d(childQuery,kit.holder),kit.childs.css("height",""),foreach(kit.childs,function(hChild){var height=$(hChild).height();isNumber(height)&&height>kit.height&&(kit.height=height)}),"capture-children"===kit.mode?kit.holder.height(kit.height):("fill-children"===kit.mode||"sync-children"===kit.mode)&&kit.childs.height(kit.height)}$cfg.clean!==!0&&Automator.debug||(kit.holder.remData([$cfg.data.Kit,$cfg.data.KitID]),kit.childs.remData([$cfg.data.Child,$cfg.data.KitID]))}),this};Automator(nameof["box-height"],boxHeight).setup("loadtime","onload"),$.fn.maintainHeight=function(mode){var $atm=Automator(nameof["box-height"]);return isString(mode)||(mode=this.getData($atm._config.data.Kit)),isString(mode)&&this.setData($atm._config.data.Kit,mode),$atm.build(this),this};var BoxRowHeightMaintainer=function(){return this.column=3,this.holder=$("<div>"),this.childs=$("<div>"),this.groups={},this};BoxRowHeightMaintainer.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this}};var boxRowHeight=function(object){var $cfg=this._config;return $cfg.data.Child="box-row-child",$cfg.data.Group="box-row-group",isJQuery(object)||isString(object)?object:object=$d($cfg.data.Kit),isString(object)?object=$d($cfg.data.Kit,object):object,object=object.filter(":hasdata("+$cfg.data.Kit+")"),object.each(function(){var kit_id=$(this).getData($cfg.data.KitID);isString(kit_id)||(kit_id=$cfg.IDPrefix+($cfg.counter+1),$cfg.counter++);var Kit=(new BoxRowHeightMaintainer).set({id:kit_id,holder:$(this).setData($cfg.data.KitID,kit_id)}),column=Kit.holder.getData($cfg.data.Kit);isString(column)&&(Kit.column=column),$cfg.maps[kit_id]=Kit,$d($cfg.data.Child,Kit.holder).setData($cfg.data.KitID,kit_id)}),foreach($cfg.maps,function(id,kit){var childQuery={};childQuery[$cfg.data.Child]="?",childQuery[$cfg.data.KitID]=id,kit.childs=$d(childQuery);var counts=1,groups=1;foreach(kit.childs,function(hChild){hChild=$(hChild),counts===kit.column+1?(counts=1,groups++):counts++,isObject(kit.groups[groups])||(kit.groups[groups]={height:0,childs:[]}),hChild.setData($cfg.data.Group,groups),kit.groups[groups].childs.push(hChild)}),foreach(kit.groups,function(id,group){foreach(group.childs,function(child){child=$(child),child.height()>group.height&&(group.height=child.height())}),foreach(group.childs,function(child){$(child).height(group.height)})}),$cfg.clean!==!0&&Automator.debug||(kit.holder.remData([$cfg.data.Kit,$cfg.data.KitID]),kit.childs.remData([$cfg.data.Child,$cfg.data.KitID]))}),this};Automator(nameof["box-row-height"],boxRowHeight).setup("loadtime","onload"),$.fn.maintainRowHeight=function(column){var $atm=Automator(nameof["box-row-height"]);return isNumber(column)||(column=this.getData($atm._config.data.Kit)),isNumber(column)&&this.setData($atm._config.data.Kit,column),$atm.build(this),this}}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="content-rotator",defConf={IDPrefix:"cr-",effect:{"default":function(){return this.swap(),this},simple:function(){var $this=this;return $this.active.fadeOut(function(){$this.target.fadeIn(function(){$this.swap()})}),this}},callback:{}},defData={id:"content-rotator-id",kit:"content-rotator",item:"content-rotator-item",prev:"content-rotator-prev",next:"content-rotator-next",select:"content-rotator-select","default":"default",progress:"content-rotator-progress",state:"content-rotator-state",active:"active",paused:"paused",stopped:"stopped",forward:"forward",backward:"backward"},ContentRotator=function(){return this.config={auto:!1,effect:"default",progress:!1,onnavigate:"none",select:!0,before:!1,after:!1},this.prev=$("<div>"),this.next=$("<div>"),this.items=$("<div>"),this.holder=$("<div>"),this.selects=$("<div>"),this.active=$("<div>"),this.target=$("<div>"),this.activeS=$("<div>"),this.targetS=$("<div>"),this.current=0,this.total=0,this.navdir="none",this};ContentRotator.prototype={set:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this[name]=value:isObject(name)&&foreach(name,function(name,value){$this[name]=value}),this},use:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this.config[name]=value:isObject(name)&&foreach(name,function(name,value){$this.config[name]=value}),this},navigate:function($dir){if(isString($dir)||isNumber($dir)){var $this=this,$next=0,$data=$this.$data;if($this.stop(),$dir===$data.forward?$next=$this.current<$this.total-1?$this.current+1:0:$dir===$data.backward?$next=$this.current>=1?$this.current-1:$this.total-1:isNumber($dir)&&($next=$dir),$this.navdir=$dir,$this.target=$($this.items.get($next)),$this.config.select&&($this.targetS=$($this.selects.get($next))),$this.config.before&&($this.before=$($this.items.get($next-1)),$this.before.length<1&&($this.before=$($this.items.get($this.items.length-1))),$this.config.select&&($this.beforeS=$($this.selects.get($next-1)),$this.beforeS.length<1&&($this.beforeS=$($this.selects.get($this.items.length-1))))),$this.config.after&&($this.after=$($this.items.get($next+1)),$this.after.length<1&&($this.after=$($this.items.get(0))),$this.config.select&&($this.afterS=$($this.selects.get($next+1)),$this.afterS.length<1&&($this.afterS=$($this.selects.get(0))))),1===$this.target.length)return $this.current=$next,$this.animate(),this}},animate:function(){var $this=this,$conf=$this.$conf,$anim=($this.$data,$this.config.effect);return $conf.effect.hasOwnProperty($anim)?$conf.effect[$anim].apply($this):$conf.effect.default.apply($this),this},swap:function(){var $this=this,$conf=$this.$conf,$data=$this.$data;return $this.active.removeClass($data.active),$this.activeS.removeClass($data.active),$this.target.addClass($data.active),$this.targetS.addClass($data.active),!$conf.clean&&Automator.debug&&($this.active.remData($data.state),$this.activeS.remData($data.state),$this.target.setData($data.state,$data.active),$this.targetS.setData($data.state,$data.active)),$this.active=$this.target,$this.activeS=$this.targetS,$conf.callback.hasOwnProperty($this.config.onnavigate)&&$conf.callback[$this.config.onnavigate].apply($this),isNumber($this.config.auto)&&$this.start(),this},start:function(){if(isNumber(this.config.auto)){var $this=this,$data=$this.$data,duration=1e3*$this.config.auto,width=$this.progress.width();if(width>0){var style=$this.progress.style();duration-=Number(style.width.replace("%","")/100)*duration}return $this.progress.removeClass($data.stopped).removeClass($data.paused).animate({width:"100%"},duration,function(){$this.progress.width(0),$this.navigate($data.forward)}),this}},stop:function(){if(isNumber(this.config.auto)){var $this=this,$data=$this.$data;return $this.progress.stop().removeClass($data.paused).addClass($data.stopped).animate({width:0},200,function(){$this.progress.css("width","")}),this}},pause:function(){if(isNumber(this.config.auto)){var $this=this,$data=$this.$data;return $this.progress.stop().removeClass($data.stopped).addClass($data.paused),this}},restart:function(){if(isNumber(this.config.auto)){var $this=this;return $this.stop(),$this.start(),this}}};var contentRotator=function(object){var $conf=this._config,$data=this._config.data;return isJQuery(object)||isString(object)?object:object=$d($data.kit),isString(object)?object=$d($data.kit,object):object,object=object.filter(":hasdata("+$data.kit+")"),object.each(function(){var kit_id=$(this).getData($data.id);isString(kit_id)||(kit_id=$conf.IDPrefix+($conf.counter+1),$conf.counter++);var kit=(new ContentRotator).set({$conf:$conf,$data:$data,id:kit_id,holder:$(this).setData($data.id,kit_id)}),config=kit.holder.getData($data.kit);isObject(config)&&kit.use(config),kit.items=$d($data.item,kit.holder).setData($data.id,kit_id),kit.config.select&&(kit.selects=$d($data.select,kit.holder).setData($data.id,kit_id)),kit.prev=$d($data.prev,kit.holder).setData($data.id,kit_id),kit.next=$d($data.next,kit.holder).setData($data.id,kit_id),kit.progress=$d($data.progress,kit.holder).setData($data.id,kit_id),$conf.maps[kit_id]=kit}),foreach($conf.maps,function(id,kit){kit.items=kit.items.filter(":hasdata("+$data.id+", "+id+")"),kit.total=kit.items.length,kit.selects=kit.selects.filter(":hasdata("+$data.id+", "+id+")"),kit.prev=kit.prev.filter(":hasdata("+$data.id+", "+id+")"),kit.next=kit.next.filter(":hasdata("+$data.id+", "+id+")"),kit.progress=kit.progress.filter(":hasdata("+$data.id+", "+id+")"),kit.progress.length<1&&isNumber(kit.config.auto)&&(kit.progress=$('<div class="progress" '+$data.progress+">").setData($data.id,id).prependTo(kit.holder),kit.config.progress||kit.progress.css({position:"absolute",top:0,left:0,visibility:"hidden",opacity:0}));var def=kit.items.filter(":hasdata("+$data.default+")");def=1===def.length?kit.items.index(def):0,kit.navigate(def),kit.selects.click(function(e){e.stopPropagation();var index=kit.selects.index(this);return isNumber(index)&&kit.navigate(index),!1}),kit.prev.click(function(e){return e.stopPropagation(),kit.navigate($data.backward),!1}),kit.next.click(function(e){return e.stopPropagation(),kit.navigate($data.forward),!1}),($conf.clean||!Automator.debug)&&(kit.holder.remData([$data.kit,$data.id]),kit.items.remData([$data.item,$data.id,$data.default]),kit.selects.remData([$data.select,$data.id]),kit.prev.remData([$data.prev,$data.id]),kit.next.remData([$data.next,$data.id]),kit.progress.remData([$data.progress,$data.id])),isNumber(kit.config.auto)&&kit.start()}),this};contentRotator.prototype={addAnimation:function(name,handler){var $this=this;return isString(name)&&isFunction(handler)?$this._config.effect[name]=handler:isObject(name)&&foreach(name,function(name,handler){$this._config.effect[name]=handler}),this},addCallback:function(name,handler){var $this=this;return isString(name)&&isFunction(handler)?$this._config.callback[name]=handler:isObject(name)&&foreach(name,function(name,handler){$this._config.callback[name]=handler}),this}},Automator(AutomatorName,contentRotator).setup(defConf).config(defData)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="tab",defConf={effect:{}},defData={content:"tab-content",buttons:"tab-button",current:"current",state:"tab-state"},ContentTab=function(){return this.config={effect:"default"},this.id="",this.holder=$("<div>"),this.current={button:$("<div>"),content:$("<div>")},this.target={button:$("<div>"),content:$("<div>")},this};ContentTab.prototype={set:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this[name]=value:isObject(name)&&foreach(name,function(name,value){$this[name]=value}),this},use:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this[name]=value:isObject(name)&&foreach(name,function(name,value){$this[name]=value}),this},"switch":function(index){var $this=this;return $this.target.button=$($this.buttons.get(index)),$this.target.content=$($this.content.get(index)),$this.$conf.effect.hasOwnProperty($this.config.effect)?$this.$conf.effect[$this.config.effect].apply($this):($this.current.button.removeClass($this.$data.current),$this.current.content.removeClass($this.$data.current),$this.target.button.addClass($this.$data.current),$this.target.content.addClass($this.$data.current),!$this.$conf.clean&&Automator.debug&&($this.current.button.remData($this.$data.state),$this.current.content.remData($this.$data.state),$this.target.button.setData($this.$data.state,$this.$data.current),$this.target.content.setData($this.$data.state,$this.$data.current))),$this.current.button=$this.target.button,$this.current.content=$this.target.content,this}};var contentTab=function(object){var $conf=this._config,$data=this._config.data;return isJQuery(object)||isString(object)?object:object=$d($data.Kit),isString(object)?object=$d($data.Kit,object):object,object=object.filter(":hasdata("+$data.Kit+")"),object.each(function(){var kit_id=$(this).getData($data.KitID);isString(kit_id)||(kit_id=$conf.IDPrefix+($conf.counter+1),$conf.counter++);var Kit=(new ContentTab).set({id:kit_id,holder:$(this).setData($data.KitID,kit_id),$conf:$conf,$data:$data}),config=Kit.holder.getData($data.Kit);isObject(config)&&Kit.use(config),$d($data.content,Kit.holder).setData($data.KitID,kit_id),$d($data.buttons,Kit.holder).setData($data.KitID,kit_id),$conf.maps[kit_id]=Kit}),foreach($conf.maps,function(id,kit){var buttonQuery={};buttonQuery[$data.buttons]="?",buttonQuery[$data.KitID]=id,kit.buttons=$d(buttonQuery,kit.holder).click(function(e){e.stopPropagation();var index=kit.buttons.index(this);return kit.switch(index),!1});var contentQuery={};contentQuery[$data.content]="?",contentQuery[$data.KitID]=id,kit.content=$d(contentQuery,kit.holder);var def=kit.content.filter(":hasattr(default)");def=1===def.length?kit.content.index(def):0,kit.switch(def),($conf.clean||!Automator.debug)&&(kit.holder.remData([$data.Kit,$data.KitID]),kit.buttons.remData([$data.button,$data.KitID]),kit.content.remData([$data.content,$data.KitID]).removeAttr("default"))}),this};contentTab.prototype={addEffect:function(name,handler){var $this=this;return isString(name)&&isFunction(handler)?$this._config.effect[name]=handler:isObject(name)&&foreach(name,function(name,handler){$this._config.effect[name]=handler}),this}},Automator(AutomatorName,contentTab).setup(defConf).config(defData)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="dropdown",defData={list:"dropdown-list",item:"dropdown-item",label:"dropdown-label",value:"value",button:"dropdown-button",state:"dropdown-state",current:"current",exclass:"expanded",coclass:"collapsed"},defConf={alive:!1,effect:{expand:{"default":function(){var $this=this,$data=$this.$data;return $this.holder.setData($data.state,$data.exclass).addClass($data.exclass),$this.button.setData($data.state,$data.exclass).addClass($data.exclass),$this.lists.setData($data.state,$data.exclass).addClass($data.exclass),this},simple:function(){var $this=this,$data=$this.$data;return $this.holder.setData($data.state,$data.exclass).addClass($data.exclass),$this.button.setData($data.state,$data.exclass).addClass($data.exclass),$this.lists.setData($data.state,$data.exclass).slideDown().addClass($data.exclass),this}},collapse:{"default":function(){var $this=this,$data=$this.$data;return $this.holder.remData($data.state,$data.exclass).removeClass($data.exclass),$this.button.remData($data.state,$data.exclass).removeClass($data.exclass),$this.lists.remData($data.state,$data.exclass).removeClass($data.exclass),this},simple:function(){var $this=this,$data=$this.$data;return $this.holder.remData($data.state,$data.exclass).removeClass($data.exclass),$this.button.remData($data.state,$data.exclass).removeClass($data.exclass),$this.lists.remData($data.state,$data.exclass).slideUp().removeClass($data.exclass),this}}},select:{}},Dropdown=function(){return this.config={effect:"default",select:"none",type:"anchor"},this.holder=$("<div>"),this.button=$("<span>"),this.label=$("<span>"),this.lists=$("<div>"),this.items=$("<ul>"),this.select=$("<select>"),this.active=null,this.target=null,this.state="init",this};Dropdown.prototype={set:function(name,value){var $this=this;return isString(name)&&isDefined(value)?$this[name]=value:isObject(name)&&foreach(name,function(name,value){$this[name]=value}),this},use:function(name,value){var $this=this;return isString(name)&&isDefined(value)?$this.config[name]=value:isObject(name)&&foreach(name,function(name,value){$this.config[name]=value}),this},expand:function(){{var $this=this,$conf=$this.$conf;$this.$data}return $this.state="expanded",$conf.effect.expand.hasOwnProperty($this.config.effect)?$conf.effect.expand[$this.config.effect].apply(this):$conf.effect.expand["default"].apply(this),this},collapse:function(){{var $this=this,$conf=$this.$conf;$this.$data}return $this.state="collapsed",$conf.effect.collapse.hasOwnProperty($this.config.effect)?$conf.effect.collapse[$this.config.effect].apply(this):$conf.effect.collapse["default"].apply(this),this},toggle:function(){{var $this=this;$this.$conf,$this.$data}return"expanded"===$this.state?$this.collapse():($this.$conf.alive||Automator("toggle-collapse").collapse("private"),$this.expand()),this},choose:function(index){var $this=this,$conf=$this.$conf,$data=$this.$data;if(index!==$this.active){$this.items.removeAttr($data.current).removeClass($data.current);var option=$("option:nth-child("+(index+1)+")",$this.select);option.prop("selected",!0);var item=$($this.items.get(index));item.attr($data.current,"").addClass($data.current),$this.label.html(item.html()),$this.active=index,$this.target=item,"init"!==$this.state&&$conf.select.hasOwnProperty($this.config.select)&&"init"!==$this.state&&$conf.select[$this.config.select].apply(this)}return $this.collapse(),this}};var dropdown=function(object){var $conf=this._config,$data=this._config.data;isJQuery(object)||isString(object)?object:object=$d($data.Kit),isString(object)?object=$d($data.Kit,object):object,object=object.filter(":hasdata("+$data.Kit+")"),object.each(function(){var kit_id=$(this).getData($data.KitID);isString(kit_id)||(kit_id=$conf.IDPrefix+($conf.counter+1),$conf.counter++);var Kit=(new Dropdown).set({$data:$data,$conf:$conf,id:kit_id,holder:$(this).setData($data.KitID,kit_id)}),config=$(this).getData($data.Kit);if(isObject(config)?(Kit.use(config),config.hasOwnProperty("name")||Kit.use("name",kit_id)):Kit.use("name",kit_id),Kit.button=$d($data.button,Kit.holder).setData($data.KitID,kit_id),Kit.button.click(function(e){return e.stopPropagation(),Kit.toggle(),!1}),Kit.label=$d($data.label,Kit.holder).setData($data.KitID,kit_id),Kit.label.length<1&&(Kit.label=Kit.button),Kit.lists=$d($data.list,Kit.holder).setData($data.KitID,kit_id),Kit.items=$d($data.item,Kit.holder).setData($data.KitID,kit_id),"select"===Kit.config.type){var select=$("<select hidden>").attr("name",Kit.config.name).attr("id",Kit.config.name);Kit.select=select.appendTo(Kit.holder),foreach(Kit.items,function(obj,i){var item=$(obj),option=$("<option>").appendTo(select).html(item.html()),value=item.attr($data.value);isString(value)?(option.attr("value",value),Kit.active=i):(option.attr("value",item.html()),Kit.active=i),item.click(function(e){return e.stopPropagation(),Kit.choose(i),!1})}),Kit.select.change(function(){var active=$("option:selected",this),index=$("option",this).index(active);Kit.choose(index)})}var def=Kit.items.filter(":hasattr(default)");def=1===def.length?Kit.items.index(def):0,Kit.choose(def),$conf.maps[kit_id]=Kit,Automator("toggle-collapse").register(Kit),($conf.clean||!Automator.debug)&&(Kit.holder.remData([$data.KitID,$data.Kit]),Kit.button.remData([$data.KitID,$data.button]),Kit.label.remData([$data.KitID,$data.label]),Kit.items.remData([$data.KitID,$data.item]),Kit.lists.remData([$data.KitID,$data.list]))})};dropdown.prototype={addExpandEffect:function(name,func){var $this=this;return isString(name)&&isFunction(func)?$this._config.effect.expand[name]=func:isObject(name)&&foreach(name,function(name,func){$this._config.effect.expand[name]=func}),this},addCollapseEffect:function(name,func){var $this=this;return isString(name)&&isFunction(func)?$this._config.effect.collapse[name]=func:isObject(name)&&foreach(name,function(name,func){$this._config.effect.collapse[name]=func}),this},addSelectHanlder:function(name,func){var $this=this;return isString(name)&&isFunction(func)?$this._config.select[name]=func:isObject(name)&&foreach(name,function(name,func){$this._config.select[name]=func}),this}},Automator(AutomatorName,dropdown).setup(defConf).config(defData)}(jQuery,jQuery.findData),function($,$d){"use strict";var Config={counter:0,IDPrefix:"editable-",handler:{}},EditableKit=function(object){isJQuery(object)?object:object=$d("editable-kit"),object.each(function(){var index=Config.counter+1,ea_id=Config.IDPrefix+index,buttons=($d("editable-content",this).setData("editable-id",ea_id),$d("editable-button",this).setData("editable-id",ea_id));buttons.click(function(e){e.stopPropagation();var state=$(this).getData("editable-state"),ea_id=$(this).getData("editable-id"),edits=$d({"editable-content":"?","editable-id":ea_id});if("editing"===state){$(this).setData("editable-state","ready"),edits.attr("contenteditable",!1);var hasHand=Object.keys(Config.handler);hasHand.length>0&&foreach(Config.handler,function(name,func){func({button:$(this),content:edits})})}else $(this).setData("editable-state","editing"),edits.attr("contenteditable",!0)}),Config.counter++})};EditableKit.prototype={afterEdit:function(name,func){return isString(name)&&isFunction(func)&&(Config.handler[name]=func),this},setup:function(object){return isObject(object)&&foreach(object,function(name,value){Config[name]=value}),this}},Automator("editable-kit",EditableKit).autobuild(!0).escape(function(){return Automator("editable-kit").enabled===!1?!0:!1})}(jQuery,jQuery.findData),function($,$d){"use strict";var Config={APIKey:"AIzaSyAbKrYcLQ9NtXJETMS79aXxDrUzholMzKE",gmaps:void 0,embed:{baseURL:"https://www.google.com/maps/embed/v1/"},"static":{baseURL:"https://maps.googleapis.com/maps/api/staticmap?",type:"roadmap",size:"640x640",zoom:"13",center:"Gumelar, Wadaslintang, Indonesia",marker:[{color:"red",label:"H",icon:"default",pos:"-7.514802,109.8548565"}],styler:[{feature:"all",saturation:-60,hue:"0xCCCCCC"}]},basic:{type:"roadmap",counter:0,collection:{}}},GoogleMap={};GoogleMap.Basic=function(object){return window.google&&window.google.maps?(isJQuery(object)?object:object=$d("google-map"),object.each(function(){if($(this).hasData("google-map")){var id=$(this).attr("id");isString(id)||(id="gmap-"+(Config.basic.counter+1),$(this).attr("id",id),Config.basic.counter++);var GMaps=Config.gmaps=google.maps,core=$(this).getData("google-map"),config=$(this).getData("gmap-config"),marker=$(this).getData("gmap-markers"),styler=$(this).getData("gmap-styles");if(isArray(core)){var option={center:new GMaps.LatLng(core[0],core[1]),type:GMaps.MapTypeId[Config.basic.type.toUpperCase()]};isObject(config)&&foreach(config,function(key,value){option[key]=value}),isArray(styler)&&(option.styles=styler);var map=new GMaps.Map(this,option);Config.basic.collection[id]=map,isArray(marker)&&foreach(marker,function(pin){if(isString(pin.pos)){var npin=pin.pos.replace(/\s+/g,"").split(",");if(isArray(npin)&&2===npin.length){var pinOpt={map:map,position:new GMaps.LatLng(npin[0],npin[1])};foreach(pin,function(key,value){"pos"!==key&&"effect"!==key&&("icon"===key&&isURL(value)?pinOpt[key]=value:"icon"!==key&&(pinOpt[key]=value))}),isString(pin.effect)&&(pinOpt.animation=Config.gmaps.Animation[pin.effect.toUpperCase()]);{new GMaps.Marker(pinOpt)}}}})}}}),this):void 0},GoogleMap.Basic.prototype={list:function(){return Config.basic.collection},"with":function(id){return isString(id)?new GoogleMap.Edit(id):this}},GoogleMap.Edit=function(id){return isString(id)&&Config.basic.collection.hasOwnProperty(id)?(this.map=Config.basic.collection[id],this):void 0},GoogleMap.Edit.prototype={addMarker:function(marker,center){if(isObject(marker)){if(isString(marker.pos)){var npin=marker.pos.replace(/\s+/g,"").split(",");if(isArray(npin)&&2===npin.length){var markerOpt={map:this.map,position:new Config.gmaps.LatLng(npin[0],npin[1])};if(foreach(marker,function(key,value){"pos"!==key&&"effect"!==key&&(markerOpt[key]=value)}),isString(marker.effect)&&(markerOpt.animation=Config.gmaps.Animation[marker.effect.toUpperCase()]),center===!0)this.map.setCenter(new Config.gmaps.LatLng(npin[0],npin[1])),setTimeout(function(){new Config.gmaps.Marker(markerOpt)},200);else{new Config.gmaps.Marker(markerOpt)}}}}else if(isArray(marker)){var parent=this;foreach(marker,function(pin){parent.addMarker(pin)})}return this},zoom:function(zoom){return isNumber(zoom)&&this.map.setZoom(zoom),this}},Automator("google-map",GoogleMap.Basic),GoogleMap.Search=function(object){isJQuery(object)?object:object=$d("gmap-search"),object.each(function(){if($(this).hasData("gmap-search")){var url=Config.embed.baseURL+"search?key="+Config.APIKey,query=$(this).attr("data-gmap-search");if(isString(query)){url+="&q="+query;var config=$(this).getData("gmap-config");isObject(config)&&foreach(config,function(key,value){url+="&"+key+"="+value});var frame=$("<iframe>").css({width:"100%",height:"100%",border:0}).attr({frameborder:0,src:encodeURI(url)});$(this).html(frame)}}})},GoogleMap.Search.prototype={APIKey:function(key){return isString(key)&&(Config.APIKey=key),this}},Automator("google-map-search",GoogleMap.Search).autobuild(!0).escape(function(){return Automator("google-map-search").enabled===!1?!0:!1}),GoogleMap.Static=function(object){isJQuery(object)?object:object=$d("gmap-static"),object.each(function(){if($(this).hasData("gmap-static")){var url=Config.static.baseURL,option={type:Config.static.type,size:Config.static.size,zoom:Config.static.zoom,center:void 0,marker:$(this).getData("gmap-markers"),styler:$(this).getData("gmap-styles")},config=$(this).getData("gmap-static");isObject(config)&&foreach(config,function(key,value){option[key]=value}),url+="&maptype="+option.type+"&size="+option.size+"&zoom="+option.zoom,isString(option.center)&&(url+="&center="+option.center),isArray(option.marker)&&foreach(option.marker,function(marker){isString(marker.pos)&&(url+="&markers=",isString(marker.color)&&(url+="color:"+marker.color),isString(marker.label)&&(url+="|label:"+marker.label),isString(marker.icon)&&(url+="|icon:"+marker.icon),url+="|"+marker.pos)}),isArray(option.styler)&&foreach(option.styler,function(style){url+="&style=",foreach(style,function(key,value){url+=key+":"+value+"|"})}),url=encodeURI(url),$(this).html(" ");{$("<img />").attr("src",url).appendTo(this)}}})},Automator("google-map-static",GoogleMap.Static).autobuild(!0).escape(function(){return Automator("google-map-static").enabled===!1?!0:!1}),GoogleMap.Place=function(object){return isJQuery(object)?object:object=$d("gmap-place"),object.each(function(){if($(this).hasData("gmap-place")){var url=Config.embed.baseURL+"place?key="+Config.APIKey,query=$(this).attr("data-gmap-place");if(isString(query)){url+="&q="+query;var config=$(this).getData("gmap-config");isObject(config)&&foreach(config,function(key,value){url+="&"+key+"="+value});var frame=$("<iframe>").css({width:"100%",height:"100%",border:0}).attr({frameborder:0,src:encodeURI(url)});$(this).html(frame)}}}),this},Automator("google-map-place",GoogleMap.Place).autobuild(!0).escape(function(){return Automator("google-map-place").enabled===!1?!0:!1}),GoogleMap.Direction=function(object){isJQuery(object)?object:object=$d("gmap-direction"),object.each(function(){if($(this).hasData("gmap-direction")){var url=Config.embed.baseURL+"directions?key="+Config.APIKey,direct=$(this).getData("gmap-direction");if(isObject(direct)&&isString(direct.from)&&isString(direct.to)){url+="&origin="+direct.from+"&destination="+direct.to,isString(direct.avoid)&&(url+="&avoid="+direct.avoid);var config=$(this).getData("gmap-config");isObject(config)&&foreach(config,function(key,value){url+="&"+key+"="+value
}),console.log(config);var frame=$("<iframe>").css({width:"100%",height:"100%",border:0}).attr({frameborder:0,src:encodeURI(url)});$(this).html(frame)}}})},Automator("google-map-direction",GoogleMap.Direction).autobuild(!0).escape(function(){return Automator("google-map-direction").enabled===!1?!0:!1}),$.fn.buildMap=function(){return this.hasData("gmap-search")?Automator("google-map-search").build(this):this.hasData("gmap-static")?Automator("google-map-static").build(this):this.hasData("gmap-place")?Automator("google-map-place").build(this):this.hasData("gmap-direction")?Automator("google-map-direction").build(this):this.hasData("google-map")&&Automator("google-map").build(this),this}}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="grid",defData={column:"grid-col",wrapper:"grid-wrap"},Grid=function(){return this.config={width:!1,column:12,gutter:10,gutterpos:"left",pull:!0,wrap:!0,format:"%"},this.holder=$("<div>"),this.wrapper=$("<div>"),this.columns=$("<div>"),this.width=0,this.colWidth=0,this.gutWidth=0,this};Grid.prototype={set:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this[name]=value:isObject(name)&&foreach(name,function(name,value){$this[name]=value}),this},use:function(name,value){var $this=this;return isString(name)&&isDefined(value)?this.config[name]=value:isObject(name)&&foreach(name,function(name,value){$this.config[name]=value}),this}};var grid=function(object){var $conf=this._config,$data=this._config.data;return isJQuery(object)||isString(object)?object:object=$d($data.Kit),isString(object)?object=$d($data.Kit,object):object,object=object.filter(":hasdata("+$data.Kit+")"),object.each(function(){var kit_id=$(this).getData($data.KitID);isString(kit_id)||(kit_id=$conf.IDPrefix+($conf.counter+1),$conf.counter++);var kit=(new Grid).set({$conf:$conf,$data:$data,id:kit_id,holder:$(this).setData($data.KitID,kit_id)}),config=$(this).getData($data.Kit);isObject(config)&&kit.use(config),kit.wrapper=$d($data.wrapper,kit.holder).setData($data.KitID,kit_id),kit.columns=$d($data.column,kit.holder).setData($data.KitID,kit_id),kit.config.width||(kit.config.width=kit.holder.width());var gut_size=kit.config.gutter/kit.config.width*100,col_size=100/kit.config.column-gut_size,own_size=100+gut_size;"px"===kit.config.format?(kit.width=Math.round(own_size/100*kit.config.width),kit.colWidth=Math.round(col_size/100*kit.config.width),kit.gutWidth=Math.round(gut_size/100*kit.config.width)):"%"===kit.config.format&&(kit.width=Math.round(own_size),kit.colWidth=Math.round(col_size),kit.gutWidth=Math.round(gut_size)),$conf.maps[kit_id]=kit}),foreach($conf.maps,function(id,kit){kit.wrapper=kit.wrapper.filter(":hasdata("+$data.KitID+", "+id+")"),kit.config.wrap&&kit.wrapper.css({width:kit.width+kit.config.format}),kit.config.pull&&kit.gutWidth>0&&kit.wrapper.css("margin-"+kit.config.gutterpos,"-"+kit.gutWidth+kit.config.format),kit.columns=kit.columns.filter(":hasdata("+$data.KitID+", "+id+")").each(function(){var col=$(this).getData($data.column);if(isNumber(col)){var width=kit.colWidth*col+kit.gutWidth*(col-1);$(this).css("width",width+kit.config.format),kit.gutWidth>0&&$(this).css("margin-"+kit.config.gutterpos,kit.gutWidth+kit.config.format)}$(this).hasData("box-ratio")&&$(this).css("height","").maintainRatio()}),($conf.clean||!Automator.debug)&&(kit.holder.remData([$data.Kit,$data.KitID]),kit.wrapper.remData([$data.wrapper,$data.KitID]),kit.columns.remData([$data.column,$data.KitID]))}),this};Automator(AutomatorName,grid).config(defData)}(jQuery,jQuery.findData),function($){"use strict";var ImageOrientation=function(object){return isJQuery(object)?object:object=$("img"),object.each(function(){var w=$(this).width(),h=$(this).height();w>h?$(this).removeClass("portrait").addClass("landscape"):$(this).removeClass("landscape").addClass("portrait")}),this};Automator("image-orientation",ImageOrientation).autobuild(!0).escape(function(){return Automator("image-orientation").enabled===!1?!0:!1});var ImageResponsive=function(object){isJQuery(object)?object:object=$("img:hasattr(responsive)"),object.each(function(){var img_src=parseURL($(this).attr("src")),img_out="";img_out=window["is-mobile"]?img_src.root+img_src.name+".mobile."+img_src.ext:window["is-tablet"]?img_src.root+img_src.name+".tablet."+img_src.ext:img_src.root+img_src.name+"."+img_src.ext,$(this).attr("src",img_out)})};Automator("image-responsive",ImageResponsive).autobuild(!0).escape(function(){return(Automator("image-responsive").enabled=!1)?!0:!1});var ImageRetina=function(object){isJQuery(object)?object:object=$("img:hasattr(retina)"),object.each(function(){var img_src=parseURL($(this).attr("src")),img_out="";img_out=window["is-retina"]?img_src.root+img_src.name+"@2x."+img_src.ext:img_src.root+img_src.name+"."+img_src.ext,$(this).attr("src",img_out)})};Automator("image-retina",ImageRetina).autobuild(!0).escape(function(){return Automator("image-retina").enabled===!1?!0:!1})}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="input-placeholder",Config={counter:0,IDPrefix:"iph-",clean:!0,data:{Kit:"placeholder",KitID:"placeholder-id",Config:"placeholder-config",Write:"writing",Correct:"correct",Error:"error"},object:{},focus:{"default":function(){return this.config.native===!1&&(this.isEmpty()&&this.config.clean===!0?this.holder.val(""):this.isEmpty()||this.config.clean!==!1||this.holder.focusTo(1,this.holder.val().length)),this}},blur:{"default":function(){return this.holder.removeClass(Config.data.Write),this.config.native===!1&&this.isEmpty()&&this.holder.val(this.text),this.validate(),this}},write:{"default":function(){return this.holder.addClass(Config.data.Write).removeClass(Config.data.Error).removeClass(Config.data.Correct),this.config.live===!0&&this.validate(),this}},error:{"default":function(){return this.holder.removeClass(Config.data.Correct).addClass(Config.data.Error),this}},correct:{"default":function(){return this.holder.removeClass(Config.data.Error).addClass(Config.data.Correct),this}},validate:{"default":function(){var type=this.holder.attr("type");return Config.validate.hasOwnProperty(type)?Config.validate[type].apply(this,arguments):Config.validate.text.apply(this,arguments),this},text:function(){this.isEmpty()===!0&&this.config.required===!0?this.error():this.correct()},email:function(){this.handle("validate","text"),this.isEmpty()||isEmail(this.holder.val())||this.error()},password:function(){this.handle("validate","text")}}},InputPlaceholder=function(){return this.config={"native":!0,clean:!0,required:!1,min:1,live:!1,check:"default",blur:"default",focus:"default",write:"default",error:"none",correct:"none"},this.holder=$('<input type="text">'),this.valid=!0,this.text="",this};InputPlaceholder.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this},setup:function(name,value){if(isString(name)&&isDefined(value))this.config[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self.config[name]=value})}return this},isEmpty:function(){var text=this.holder.val();return text.replace(/\s+/g,"").length<this.config.min||this.holder.val()===this.text?!0:!1},handle:function(event,handler){return isString(event)&&(isString(handler)||(handler=this.config[event]),Config.hasOwnProperty(event)&&Config[event].hasOwnProperty(handler)&&Config[event][handler].apply(this,arguments)),this},validate:function(){Config.validate.hasOwnProperty(this.config.check)&&Config.validate[this.config.check].apply(this,arguments)},error:function(){return this.valid=!1,this.handle("error","default"),this.handle("error",this.config.error),this},correct:function(){return this.valid=!0,this.handle("correct","default"),this.handle("correct",this.config.correct),this}};var inputPlaceholder=function(object){return isJQuery(object)?object:object=$d(Config.data.Kit),object=object.filter(":hasdata("+Config.data.Kit+")"),object.each(function(){var kit_id=$(this).getData(Config.data.KitID);isString(kit_id)||(kit_id=Config.IDPrefix+(Config.counter+1),$(this).setData(Config.data.KitID,kit_id));var kit=(new InputPlaceholder).set({kit_id:kit_id,holder:$(this),cons:Config.data}),config=$(this).getData(Config.data.Config);isObject(config)&&kit.setup(config);var text=$(this).attr("data-"+Config.data.Kit);isString(text)&&(kit.text=text);var value=kit.holder.val();value.replace(/\s+/g,"").length<kit.config.min&&(kit.config.native===!0?kit.holder.attr("placeholder",text):kit.holder.val(text)),$(this).bind("focus",function(){kit.handle("focus")}).bind("blur",function(){kit.handle("blur")}).bind("keyup",function(){kit.handle("write")}),Config.clean&&kit.holder.remData([Config.data.Kit,Config.data.Config,Config.data.KitID]),Config.object[kit_id]=kit,Config.counter++}),this};inputPlaceholder.prototype={setup:function(name,value){isString(name)&&isDefined(value)?Config[name]=value:isObject(name)&&foreach(name,function(name,value){Config[name]=value})},"with":function(name){return Config.object.hasOwnProperty(name)?Config.object[name]:void 0},list:function(){return Config.object}},Automator(AutomatorName,inputPlaceholder)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="link-scroller",Config={counter:0,IDPrefix:"link-scroller-",data:{kit:"link-scroller"},stopPos:0,independent:!0,kit:{}},linkScroller=function(object){isJQuery(object)?object:object=$d(Config.data.kit),object=object.filter(":hasdata("+Config.data.kit+")"),object.each(function(){var target=$(this).getData(Config.data.kit),scrollEffect=$(this).getData("link-scroll-effect");isString(scrollEffect)||(scrollEffect="default");var linkTarget=$(target);if(linkTarget.length>0){var top=linkTarget.offsets().top;$(this).click(function(e){Config.independent&&e.stopPropagation();var range=top-Config.stopPos;return Automator("scroll-pos").scrollTop(range,scrollEffect),Config.independent?!1:void 0})}})};linkScroller.prototype={addEffect:function(name,func){return Automator("scroll-pos").addScrollEffect(name,func),this},setup:function(name,value){return isString(name)&&isDefined(value)?Config[name]=value:isObject(name)&&foreach(name,function(name,value){Config[name]=value}),this}},Automator(AutomatorName,linkScroller)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="lazy-loader",Config={counter:0,IDPrefix:"lazy-loader-",clean:!0,data:{Kit:"lazy-loader",KitID:"lazy-loader-id",KitState:"lazy-loader-state"},loadtime:"load",object:{},effect:{"default":function(){return this.loaded=!0,this.holder.addClass(this.config.loadclass),Config.clean===!1&&this.holder.setData(Config.data.KitState,this.config.loadclass),this}}},LazyLoader=function(){return this.config={delay:0,loadtime:"winload",effect:"default",loadclass:"loaded"},this.timeHanlder=setTimeout(function(){},0),this.holder=$("<div>"),this};LazyLoader.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this}};var lazyLoader=function(object){return isJQuery(object)||isString(object)?object:object=$d(Config.data.Kit),isString(object)?object=$d(Config.data.Kit,object):object,object=object.filter(":hasdata("+Config.data.Kit+")"),object.each(function(){var kit_id=$(this).getData(Config.data.KitID);isString(kit_id)||(kit_id=Config.IDPrefix+(Config.counter+1),Config.counter++);var Kit=(new LazyLoader).set({id:kit_id,holder:$(this).setData(Config.data.KitID,kit_id)}),config=Kit.holder.getData(Config.data.Kit);isObject(config)&&foreach(config,function(key,value){Kit.config[key]=value});var delay=isNumber(Kit.config.delay)?Kit.config.delay:0,timeHandler=function(){var effectName=Kit.config.effect;if(isString(effectName)&&Config.effect.hasOwnProperty(effectName)){var effect=Config.effect[effectName];isFunction(effect)&&effect.apply(Kit)}},loadtime=Kit.config.loadtime;"winload"===loadtime?$(window).load(function(){clearTimeout(Kit.timeHanlder),Kit.timeHanlder=setTimeout(timeHandler,delay)}):"docready"===loadtime?(clearTimeout(Kit.timeHanlder),Kit.timeHanlder=setTimeout(timeHandler,delay)):"selfload"===loadtime?Kit.holder.load(function(){clearTimeout(Kit.timeHanlder),Kit.timeHanlder=setTimeout(timeHandler,delay)}):isString(loadtime)&&$(loadtime,Kit.holder).load(function(){clearTimeout(Kit.timeHanlder),Kit.timeHanlder=setTimeout(timeHandler,delay)}),Config.object[kit_id]=Kit,Config.clean===!0&&foreach(Config.data,function(key,value){Kit.holder.remData(value)})}),this};lazyLoader.prototype={setup:function(name,value){isString(name)&&isDefined(value)?Config[name]=value:isObject(name)&&foreach(name,function(name,value){Config[name]=value})},addEffect:function(name,func){return isString(name)&&isFunction(func)?Config.effect[name]=func:isObject(name)&&foreach(name,function(name,func){Config.effect[name]=func}),this},list:function(){return Config.object}},Automator(AutomatorName,lazyLoader)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="lightbox",DataCfg={KitID:"lightbox-window",Destroy:"lightbox-destroy",Content:"lightbox-content",Command:"lightbox-load"},DefConf={loadtime:"onload",cache:!1,before:{},after:{},open:{},exit:{},effect:{open:{},exit:{}}},lightBox=function(object){var $this=this,$conf=this._config,$data=this._config.data;return isJQuery(object)||isString(object)?object:object=$d($data.Kit),isString(object)?object=$d($data.Kit,object):object,object=object.filter(":hasdata("+$data.Kit+")"),object.each(function(){var kit_id=$(this).getData($data.KitID);isString(kit_id)||(kit_id=$conf.IDPrefix+($conf.counter+1),$(this).setData($data.KitID,kit_id),$conf.counter++),$this.holder=$(this),$this.ID=kit_id,$this.destroyer=$d($data.Destroy).setData($data.KitID,kit_id),$this.container=$d($data.Content).setData($data.KitID,kit_id),$this.commander=$d($data.Command).setData($data.KitID,kit_id),$conf.clean!==!0&&Automator.debug||(foreach($data,function(name,data){$this.holder.remData(data),$this.destroyer.remData(data),$this.container.remData(data)}),$this.commander.remData([$data.KitID])),$this.destroyer.click(function(e){return e.stopPropagation(),$this.exit(),!1}),$this.commander.click(function(e){return e.stopPropagation(),$this.load($(this)),!1}),$this.defclass=$this.container.attr("class")}),this};lightBox.prototype={load:function(target){var $this=this;return isJQuery(target)?(target=target.getData($this._config.data.Command),isObject(target)&&($this.target=target,$this.load(target))):isObject(target)&&($this.target=target,target.hasOwnProperty("source")?($this.hide(),target.hasOwnProperty("before")&&$this._config.before.hasOwnProperty(target.before)&&$this._config.before[target.before].apply(this),$.ajax({url:target.source,dataType:"text/html",cache:$this._config.cache,complete:function(data){target.hasOwnProperty("after")&&$this._config.after.hasOwnProperty(target.after)&&$this._config.after[target.after].apply(this),$this.target.data=data,$this.open()},error:function(data){$this.container.html("Unable to procceed request!"),$this.target.data=data,$this.open()}})):target.hasOwnProperty("content")&&($this.target.data={responseText:target.content},$this.open())),this},hide:function(){var $this=this,target=$this.target;return target.hasOwnProperty("effect")&&$this._config.effect.exit.hasOwnProperty(target.effect)?$this._config.effect.exit[target.effect].apply(this):$this.holder.removeClass("open"),this},exit:function(nowait){var $this=this,target=$this.target;return target.hasOwnProperty("effect")&&$this._config.effect.exit.hasOwnProperty(target.effect)?$this._config.effect.exit[target.effect].apply(this):($this.holder.removeClass("open"),nowait?($this.container.attr("class",$this.defclass),$this.container.empty()):$this.cleaner=setTimeout(function(){$this.container.attr("class",$this.defclass),$this.container.empty()},1e3)),target.hasOwnProperty("exit")&&$this._config.exit.hasOwnProperty(target.exit)&&$this._config.exit[target.exit].apply(this),this},open:function(){var $this=this,target=$this.target;return this.container.html(target.data.responseText),Automator.build(this.container),target.hasOwnProperty("effect")&&$this._config.effect.open.hasOwnProperty(target.effect)?$this._config.effect.open[target.effect].apply(this):$this.holder.addClass("open"),target.hasOwnProperty("open")&&$this._config.open.hasOwnProperty(target.open)&&$this._config.open[target.open].apply(this),this},beforeload:function(name,func){if(isString(name)&&isFunction(func))this._config.before[name]=func;else if(isObject(name)){var $this=this;foreach(name,function(name,func){$this._config.before[name]=func})}return this},afterload:function(name,func){if(isString(name)&&isFunction(func))this._config.after[name]=func;else if(isObject(name)){var $this=this;foreach(name,function(name,func){$this._config.after[name]=func})}return this},afteropen:function(name,func){if(isString(name)&&isFunction(func))this._config.open[name]=func;else if(isObject(name)){var $this=this;foreach(name,function(name,func){$this._config.open[name]=func})}return this},afterexit:function(name,func){if(isString(name)&&isFunction(func))this._config.exit[name]=func;else if(isObject(name)){var $this=this;foreach(name,function(name,func){$this._config.exit[name]=func})}return this}},Automator(AutomatorName,lightBox).setup(DefConf).config(DataCfg),Automator(DataCfg.Destroy,function(){var at=Automator(AutomatorName);$d(at._config.data.Destroy).each(function(){var id=at.ID;at.destroyer.push($(this).setData(at._config.data.KitID,id))}).click(function(e){return e.stopPropagation(),Automator(AutomatorName).exit(),!1})},!1),Automator(DataCfg.Command,function(){var at=Automator(AutomatorName);$d(at._config.data.Command).each(function(){var id=at.ID;at.commander.push($(this).setData(at._config.data.KitID,id))}).click(function(e){return e.stopPropagation(),Automator(AutomatorName).load($(this)),!1})},!1)}(jQuery,jQuery.findData),function($){"use strict";var Config={handleDelay:0,timeHanlder:setTimeout(function(){},0),scrollOwner:$(),scrollHolder:$(),onReachTop:[],onReachRight:[],onReachBottom:[],onReachLeft:[],onScrolling:[],enableEffect:!0,effect:{"default":function(range){isNumber(range)&&(Config.enableEffect?Config.scrollOwner.animate({scrollTop:range},500):Config.scrollOwner.scrollTop(range))}}},ScrollPos=function(){window.scrollPos={dir:"vertical",x:"left",y:"top"},Config.scrollOwner=$.findData("scroll-owner"),Config.scrollHolder=$.findData("scroll-holder"),Config.scrollOwner.length<1&&(Config.scrollOwner=$(window),Config.enableEffect=!1),Config.scrollHolder.length<1&&(Config.scrollHolder=$("body")),Config.scrollHolder.setData("scroll-holder",scrollPos);var handleScroll=function(){var windWidth=innerWidth,windHeight=innerHeight,holdWidth=Config.scrollHolder.innerWidth(),holdHeight=Config.scrollHolder.innerHeight(),right=holdWidth-windWidth,bottom=holdHeight-windHeight;0===scrollY?(scrollPos.y="top",foreach(Config.onReachTop,function(func){func()})):scrollY===bottom?(scrollPos.y="bottom",foreach(Config.onReachBottom,function(func){func()})):(scrollPos.y=scrollY,scrollY>0&&(scrollPos.dir="vertical"),foreach(Config.onScrolling,function(func){func()})),0===scrollX?(scrollPos.x="left",foreach(Config.onReachLeft,function(func){func()})):scrollX===right?(scrollPos.x="right",foreach(Config.onReachRight,function(func){func()})):(scrollPos.x=scrollX,scrollX>0&&(scrollPos.dir="horizontal"),foreach(Config.onScrolling,function(func){func()})),Config.scrollHolder.setData("scroll-holder",scrollPos)};$(window).scroll(function(){isNumber(Config.handleDelay)&&0!==Config.handleDelay?(clearTimeout(Config.timeHanlder),Config.timeHanlder=setTimeout(handleScroll,Config.handleDelay)):handleScroll()})};ScrollPos.prototype={onReachTop:function(func){return isFunction(func)?Config.onReachTop.push(func):isArray(func)&&foreach(func,function(func){isFunction(func)&&Config.onReachTop.push(func)}),this},onReachRight:function(func){return isFunction(func)?Config.onReachRight.push(func):isArray(func)&&foreach(func,function(func){isFunction(func)&&Config.onReachRight.push(func)}),this},onReachBottom:function(func){return isFunction(func)?Config.onReachBottom.push(func):isArray(func)&&foreach(func,function(func){isFunction(func)&&Config.onReachBottom.push(func)}),this},onReachLeft:function(func){return isFunction(func)?Config.onReachLeft.push(func):isArray(func)&&foreach(func,function(func){isFunction(func)&&Config.onReachLeft.push(func)}),this},onScroll:function(func){return isFunction(func)?Config.onScrolling.push(func):isArray(func)&&foreach(func,function(func){isFunction(func)&&Config.onScrolling.push(func)}),this},setDelay:function(delay){return isNumber(delay)&&(Config.handleDelay=delay),this},addScrollEffect:function(name,func){return isString(name)&&isFunction(func)?Config.effect[name]=func:isObject(name)&&foreach(name,function(name,func){Config.effect[name]=func}),this},scrollTop:function(range,effect){return isNumber(range)&&(isString(effect)&&Config.enableEffect&&Config.effect.hasOwnProperty(effect)?Config.effect[effect](range):Config.scrollOwner.scrollTop(range)),this}},Automator("scroll-pos",ScrollPos)}(jQuery),function($,$d){"use strict";var AutomatorName="scroll-docker",Config={counter:0,IDPrefix:"scroll-docker-",allowReconfigure:!1,clean:!0,data:{Kit:"scroll-docker",KitID:"scroll-docker-id",KitTrigger:"scroll-docker-pos",KitState:"scroll-docker-state",EnterClass:"enter",LeaveClass:"leave"},object:{},docker:{},dockenter:{},dockleave:{},enter:{},leave:{}};Automator("scroll-pos").onScroll(function(){var wpos=window.scrollPos;foreach(Config.dockenter,function(pos,kit){isNumber(wpos.y)&&wpos.y>=pos&&(kit.state!==Config.data.EnterClass&&(kit.state=Config.data.EnterClass,kit.holder.setData(Config.data.KitState,Config.data.EnterClass).removeClass(Config.data.LeaveClass).addClass(Config.data.EnterClass),Config.enter.hasOwnProperty(kit.config.handler)&&Config.enter[kit.config.handler].apply(kit)),kit.config.outside===!0&&kit.state===Config.data.EnterClass&&(kit.outside!==!0?wpos.y>kit.config.outsidepos&&(kit.outside=!0,kit.holder.toggleClass("outside")):kit.outside===!0&&wpos.y<kit.config.outsidepos&&(kit.outside=!1,kit.holder.toggleClass("outside"),Config.enter.hasOwnProperty(kit.config.handler)&&Config.enter[kit.config.handler].apply(kit))))}),foreach(Config.dockleave,function(pos,kit){isNumber(wpos.y)&&wpos.y<=pos&&kit.state===Config.data.EnterClass&&(kit.state=Config.data.LeaveClass,kit.holder.setData(Config.data.KitState,Config.data.LeaveClass).removeClass(Config.data.EnterClass).addClass(Config.data.LeaveClass),Config.leave.hasOwnProperty(kit.config.handler)&&Config.leave[kit.config.handler].apply(kit))})});var ScrollDocker=function(){return this.config={handler:"none",enterpos:0,leavepos:0,outside:!0,outsidepos:0},this.id="",this.state="ready",this.holder=$("<div>"),this};ScrollDocker.prototype={set:function(name,value){if(isString(name)&&isDefined(value))this[name]=value;else if(isObject(name)){var self=this;foreach(name,function(name,value){self[name]=value})}return this}};var scrollDocker=function(object){return isJQuery(object)||isString(object)?object:object=$d(Config.data.Kit),isString(object)?object=$d(Config.data.Kit,object):object,object=object.filter(":hasdata("+Config.data.Kit+")"),object.each(function(){var kit_id=$(this).getData(Config.data.KitID);isString(kit_id)||(kit_id=Config.IDPrefix+(Config.counter+1),Config.counter++);var Kit=(new ScrollDocker).set({id:kit_id,holder:$(this).setData(Config.data.KitID,kit_id)});Config.object[kit_id]=Kit;var config=$(this).getData(Config.data.Kit);isObject(config)&&(foreach(config,function(name,value){("enterpos"===name||"leavepos"===name)&&isString(value)&&(value.search("%")>-1?(value=Number(value.replace("%","")),value=value/100*window.innerHeight):value=Number(value)),Kit.config[name]=value}),config.hasOwnProperty("leavepos")||(Kit.config.leavepos=Kit.config.enterpos));var kit_top=Kit.holder.offset().top,dc_pos_etr=kit_top-Kit.config.enterpos,dc_pos_lve=kit_top-Kit.config.leavepos;Kit.config.outside===!0&&(Kit.config.outsidepos=dc_pos_etr+Kit.config.enterpos),Kit.holder.setData(Config.data.KitTrigger,{enter:dc_pos_etr,leave:dc_pos_lve}),Config.dockenter[dc_pos_etr]=Kit,Config.dockleave[dc_pos_lve]=Kit,Config.clean===!0&&foreach(Config.data,function(key,value){Kit.holder.remData(value)})}),this};scrollDocker.prototype={addEnter:function(name,func){return isString(name)&&isFunction(func)?Config.enter[name]=func:isObject(name)&&foreach(name,function(name,func){Config.enter[name]=func}),this},addLeave:function(name,func){return isString(name)&&isFunction(func)?Config.leave[name]=func:isObject(name)&&foreach(name,function(name,func){Config.leave[name]=func}),this},setup:function(name,value){if(isString(name)&&isDefined(value))Config[name]=value;else{if(!isObject(name))return Config;foreach(name,function(name,value){Config[name]=value})}return this},config:function(name,value){if(isString(name)&&isDefined(value))Config.data[name]=value;else{if(!isObject(name))return Config.data;foreach(name,function(name,value){Config.data[name]=value})}return this},"with":function(name){return Config.object.hasOwnProperty(name)?Config.object[name]:void 0}},Automator(AutomatorName,scrollDocker)}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="toggle-collapse",DownStateDestroyer=function(){var $this=this,$conf=this._config,$data=$conf.data,obj=$d($data.Kit).each(function(){$(this).click(function(){$this.collapse()})});return($conf.clean||!Automator.debug)&&obj.remData($data.Kit),this};DownStateDestroyer.prototype={register:function(toggler){var $this=this;return isObject(toggler)&&$this._config.toggler.push(toggler),this},collapse:function(){var $this=this;return foreach($this._config.toggler,function(toggler){toggler.collapse&&toggler.collapse(arguments)}),this}},Automator(AutomatorName,DownStateDestroyer).setup("toggler",[])}(jQuery,jQuery.findData),function($,$d){"use strict";var AutomatorName="virtual-map",Config={counter:0,IDPrefix:"virtual-map-",allowReconfigure:!1,allowEscape:!0,data:{Kit:"virtual-map",KitID:"virtual-map-id",KitConfigured:"virtual-map-configured",Pin:"virtual-map-pin",PinID:"virtual-map-pin-id",Info:"virtual-map-info",InfoDestroy:"virtual-map-info-destroy",PinPlaced:"placed",InfoActive:"active"},hoverDelay:200,hoverDelayHandler:setTimeout(function(){},0),map:{},initializer:{},effect:{"default":function(){return foreach(this.pins,function(pin){var pin=$(pin);setTimeout(function(){$(pin).addClass(Config.data.PinPlaced)},100*$(pin).getData(Config.data.PinID))}),this}},viewer:{"default":function(){this.targetInfo.addClass(Config.data.InfoActive)}},destroyer:{"default":function(){this.hasOwnProperty("targetInfo")&&this.targetInfo.removeClass(Config.data.InfoActive)}}},VirtualMap=function(){return this.config={baseWidth:0,baseHeight:0,action:"click",effect:"default",destroyer:"default",viewer:"default"},this.cons=Config.data,this.holder=$("<div>"),this};VirtualMap.prototype={insert:function(){return this},set:function(key,value){if(isString(key)&&isDefined(value))this[key]=value;else if(isObject(key)){var self=this;foreach(key,function(key,value){self[key]=value})}return this},dropPins:function(){return Config.effect.hasOwnProperty(this.config.effect)&&isFunction(Config.effect[this.config.effect])&&Config.effect[this.config.effect].apply(this),this},showInfo:function(){return Config.viewer.hasOwnProperty(this.config.viewer)&&isFunction(Config.viewer[this.config.viewer])&&Config.viewer[this.config.viewer].apply(this,arguments),this},destroyInfo:function(){return Config.destroyer.hasOwnProperty(this.config.destroyer)&&isFunction(Config.destroyer[this.config.destroyer])&&Config.destroyer[this.config.destroyer].apply(this,arguments),this}};var virtualMap=function(object){isJQuery(object)?object:object=$d(Config.data.Kit),isJQuery(object)&&!object.hasData(Config.data.Kit)&&(object=$d(Config.data.Kit,object)),object.each(function(){if(Config.allowReconfigure!==!1||$(this).getData(Config.data.KitConfigured)!==!0){var map_id=$(this).getData(Config.data.KitID);isString(map_id)||(map_id=Config.IDPrefix+(Config.counter+1),$(this).setData(Config.data.KitID,map_id));var map=(new VirtualMap).set({holder:$(this),map_id:map_id}),config=$(this).getData(Config.data.Kit);isObject(config)&&foreach(config,function(name,value){map.config[name]=value});{$d(Config.data.Pin,this).setData(Config.data.KitID,map_id),$d(Config.data.Info,this).setData(Config.data.KitID,map_id),$d(Config.data.InfoDestroy,this).setData(Config.data.KitID,map_id)}Config.map[map_id]=map,Config.counter++}}),foreach(Config.map,function(map_id,map){if(Config.allowReconfigure!==!1||map.holder.getData(Config.data.KitConfigured)!==!0){map.holder.setData(Config.data.KitConfigured,!0);var pinQuery={};pinQuery[Config.data.Pin]="?",pinQuery[Config.data.KitID]=map_id;var pins=$d(pinQuery).each(function(idx){$(this).setData(Config.data.PinID,idx+1);var pos=$(this).getData(Config.data.Pin);if(isObject(pos)&&pos.hasOwnProperty("x")&&pos.hasOwnProperty("y")&&isNumber(pos.x)&&isNumber(pos.y)){var x=pos.x/map.config.baseWidth*100,y=pos.y/map.config.baseHeight*100;$(this).css({left:x+"%",top:y+"%"})}("click"===map.config.action||"mouseenter"===map.config.action)&&($(this).bind(map.config.action,function(e){e.stopPropagation();var id=$(this).getData(Config.data.KitID),ix=$(this).getData(Config.data.PinID),map_object=Automator(AutomatorName).with(id),target=map_object.infos.filter(":hasdata("+Config.data.PinID+", "+ix+")");return map_object.set("targetInfo",target),"mouseenter"===map_object.config.action?Config.hoverDelayHandler=setTimeout(function(){map_object.destroyInfo().showInfo(ix)},Config.hoverDelay):map_object.destroyInfo().showInfo(ix),!1}),"mouseenter"===map.config.action&&$(this).mouseleave(function(e){return e.stopPropagation(),clearTimeout(Config.hoverDelayHandler),!1}))}),infoQuery={};infoQuery[Config.data.Info]="?",infoQuery[Config.data.KitID]=map_id;var infos=$d(infoQuery).each(function(idx){$(this).setData(Config.data.PinID,idx+1)}),destroyerQuery={};destroyerQuery[Config.data.InfoDestroy]="?",destroyerQuery[Config.data.KitID]=map_id;var destroyers=$d(destroyerQuery).click(function(e){e.stopPropagation();var id=$(this).getData(Config.data.KitID);return Automator(AutomatorName).with(id).destroyInfo(),!1});Config.allowEscape===!0&&$(window).bind("keyup",function(e){27===e.keyCode&&Automator(AutomatorName).with(map_id).destroyInfo()}),map.set({pins:pins,infos:infos,destroyers:destroyers}),map.dropPins(),foreach(Config.initializer,function(name,handler){handler.apply(map)})}})};virtualMap.prototype={"with":function(name){return isString(name)&&Config.map.hasOwnProperty(name)?Config.map[name]:this},addInitializer:function(name,handler){return isString(name)&&isFunction(handler)?Config.initializer[name]=handler:isObject(name)&&foreach(name,function(name,handler){Config.initializer[name]=handler}),this},addEffect:function(name,handler){return isString(name)&&isFunction(handler)?Config.effect[name]=handler:isObject(name)&&foreach(name,function(name,handler){Config.effect[name]=handler}),this},addViewer:function(name,handler){return isString(name)&&isFunction(handler)?Config.viewer[name]=handler:isObject(name)&&foreach(name,function(name,handler){Config.viewer[name]=handler}),this},setup:function(name,value){return isString(name)&&isDefined(value)?Config[name]=value:isObject(name)&&foreach(name,function(name,value){Config[name]=value}),this},getConfig:function(){return Config}},Automator(AutomatorName,virtualMap).autobuild(!0).escape(function(){return Automator(AutomatorName).enabled===!1?!0:!1})}(jQuery,jQuery.findData);